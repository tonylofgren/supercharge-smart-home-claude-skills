# ESPHome Cookbook

Practical, ready-to-use project examples.

## Table of Contents
- [Smart Home](#smart-home)
- [Environmental Monitoring](#environmental-monitoring)
- [Energy & Power](#energy--power)
- [Solar Energy](#solar-energy)
- [Security](#security)
- [Garage & Access](#garage--access)
- [Garden & Irrigation](#garden--irrigation)
- [Appliance Monitoring](#appliance-monitoring)
- [Entertainment](#entertainment)
- [Display Projects](#display-projects)

---

## Smart Home

### Smart Light Switch (with Power Monitoring)
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "smart-switch"
  friendly_name: "Smart Switch"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp8266:
  board: esp01_1m

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
  encryption:
    key: !secret api_encryption_key

ota:
  platform: esphome
  password: !secret ota_password

logger:
  baud_rate: 0

# Wall switch input
binary_sensor:
  - platform: gpio
    pin:
      number: GPIO0
      mode: INPUT_PULLUP
      inverted: true
    name: "Button"
    on_press:
      - switch.toggle: relay

switch:
  - platform: gpio
    id: relay
    name: "Light"
    pin: GPIO12
    restore_mode: RESTORE_DEFAULT_OFF

# Power monitoring (if available)
sensor:
  - platform: hlw8012
    sel_pin: GPIO13
    cf_pin: GPIO14
    cf1_pin: GPIO5
    current:
      name: "Current"
    voltage:
      name: "Voltage"
    power:
      name: "Power"
    update_interval: 10s
```

### Motion-Activated LED Strip
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "led-motion"

esphome:
  name: ${device_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# PIR motion sensor
binary_sensor:
  - platform: gpio
    pin: GPIO14
    name: "Motion"
    device_class: motion
    on_press:
      - if:
          condition:
            light.is_off: led_strip
          then:
            - light.turn_on:
                id: led_strip
                brightness: 100%
                transition_length: 500ms
    on_release:
      - delay: 2min
      - light.turn_off:
          id: led_strip
          transition_length: 2s

# WS2812B LED strip
light:
  - platform: neopixelbus
    id: led_strip
    name: "LED Strip"
    type: GRB
    variant: WS2812X
    pin: GPIO5
    num_leds: 60
    effects:
      - random:
      - strobe:
```

### Multi-Button Remote
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: multi-button-remote

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# Deep sleep for battery life
deep_sleep:
  run_duration: 30s
  sleep_duration: 0s  # Wake only on button press
  wakeup_pin:
    number: GPIO25
    allow_other_uses: true

binary_sensor:
  - platform: gpio
    pin:
      number: GPIO25
      mode: INPUT_PULLUP
      inverted: true
      allow_other_uses: true
    name: "Button 1"
    on_press:
      - homeassistant.event:
          event: esphome.button_press
          data:
            button: "1"

  - platform: gpio
    pin:
      number: GPIO26
      mode: INPUT_PULLUP
      inverted: true
    name: "Button 2"
    on_press:
      - homeassistant.event:
          event: esphome.button_press
          data:
            button: "2"

  - platform: gpio
    pin:
      number: GPIO27
      mode: INPUT_PULLUP
      inverted: true
    name: "Button 3"
    on_press:
      - homeassistant.event:
          event: esphome.button_press
          data:
            button: "3"

  - platform: gpio
    pin:
      number: GPIO33
      mode: INPUT_PULLUP
      inverted: true
    name: "Button 4"
    on_press:
      - homeassistant.event:
          event: esphome.button_press
          data:
            button: "4"

sensor:
  - platform: adc
    pin: GPIO35
    name: "Battery"
    update_interval: 60s
    attenuation: 11db
    filters:
      - multiply: 2  # Voltage divider
```

---

## Environmental Monitoring

### Weather Station
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "weather-station"

esphome:
  name: ${device_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

i2c:
  sda: GPIO21
  scl: GPIO22

sensor:
  # BME280 - Temperature, Humidity, Pressure
  - platform: bme280_i2c
    address: 0x76
    update_interval: 60s
    temperature:
      name: "Temperature"
      oversampling: 16x
    humidity:
      name: "Humidity"
    pressure:
      name: "Pressure"

  # BH1750 - Light intensity
  - platform: bh1750
    name: "Light Intensity"
    address: 0x23
    update_interval: 60s

  # Rain gauge (tipping bucket)
  - platform: pulse_counter
    pin: GPIO14
    name: "Rain"
    unit_of_measurement: "mm"
    filters:
      - multiply: 0.2794  # mm per pulse

  # Wind speed (anemometer)
  - platform: pulse_counter
    pin: GPIO25
    name: "Wind Speed"
    unit_of_measurement: "m/s"
    filters:
      - multiply: 0.0667  # Calibration factor

  # Wind direction (analog)
  - platform: adc
    pin: GPIO34
    name: "Wind Direction"
    update_interval: 5s
    attenuation: 11db
    filters:
      - calibrate_polynomial:
          degree: 2
          datapoints:
            - 0.4 -> 0    # N
            - 1.4 -> 45   # NE
            - 2.5 -> 90   # E
            # ... calibrate for your vane
```

### CO2 & Air Quality Monitor
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: air-quality

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

i2c:
  sda: GPIO21
  scl: GPIO22

uart:
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 9600

sensor:
  # SCD40 - CO2 sensor
  - platform: scd4x
    co2:
      name: "CO2"
    temperature:
      name: "Temperature"
    humidity:
      name: "Humidity"
    update_interval: 30s

  # PM2.5 sensor (PMS5003)
  - platform: pmsx003
    type: PMSX003
    pm_1_0:
      name: "PM 1.0"
    pm_2_5:
      name: "PM 2.5"
    pm_10_0:
      name: "PM 10"

  # SGP30 - TVOC
  - platform: sgp30
    eco2:
      name: "eCO2"
    tvoc:
      name: "TVOC"

# Air quality indicator LED
output:
  - platform: ledc
    id: led_red
    pin: GPIO25
  - platform: ledc
    id: led_green
    pin: GPIO26

light:
  - platform: rgb
    name: "Air Quality LED"
    id: air_led
    red: led_red
    green: led_green
    blue: led_red  # Reuse red for simplicity

interval:
  - interval: 10s
    then:
      - if:
          condition:
            sensor.in_range:
              id: co2
              below: 800
          then:
            - light.turn_on:
                id: air_led
                red: 0%
                green: 100%
      - if:
          condition:
            sensor.in_range:
              id: co2
              above: 800
              below: 1200
          then:
            - light.turn_on:
                id: air_led
                red: 100%
                green: 100%
      - if:
          condition:
            sensor.in_range:
              id: co2
              above: 1200
          then:
            - light.turn_on:
                id: air_led
                red: 100%
                green: 0%
```

### Freezer Temperature Alert
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: freezer-monitor

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

one_wire:
  - platform: gpio
    pin: GPIO4

sensor:
  - platform: dallas_temp
    address: 0x1234567890ABCDEF
    name: "Freezer Temperature"
    id: freezer_temp
    on_value_range:
      - above: -10.0
        then:
          - homeassistant.service:
              service: notify.mobile_app
              data:
                title: "Freezer Alert!"
                message: "Temperature is {{ freezer_temp.state }}°C"

binary_sensor:
  - platform: gpio
    pin: GPIO14
    name: "Freezer Door"
    device_class: door
    on_press:
      - delay: 5min
      - if:
          condition:
            binary_sensor.is_on: freezer_door
          then:
            - homeassistant.service:
                service: notify.mobile_app
                data:
                  title: "Freezer Door Open!"
                  message: "Door has been open for 5 minutes"
```

---

## Energy & Power

### Whole-Home Energy Monitor
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: energy-monitor

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# CT clamp sensors
sensor:
  - platform: ct_clamp
    sensor: adc_phase1
    name: "Phase 1 Current"
    sample_duration: 200ms
    update_interval: 5s

  - platform: ct_clamp
    sensor: adc_phase2
    name: "Phase 2 Current"
    sample_duration: 200ms
    update_interval: 5s

  - platform: ct_clamp
    sensor: adc_phase3
    name: "Phase 3 Current"
    sample_duration: 200ms
    update_interval: 5s

  # ADC inputs
  - platform: adc
    id: adc_phase1
    pin: GPIO34
    attenuation: 11db

  - platform: adc
    id: adc_phase2
    pin: GPIO35
    attenuation: 11db

  - platform: adc
    id: adc_phase3
    pin: GPIO32
    attenuation: 11db

  # Calculated power (assuming 230V)
  - platform: template
    name: "Total Power"
    unit_of_measurement: "W"
    lambda: |-
      return (id(phase1).state + id(phase2).state + id(phase3).state) * 230;
    update_interval: 5s
```

### Solar Inverter Monitor (Modbus)
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: solar-monitor

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

uart:
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 9600
  parity: NONE

modbus:
  id: modbus_hub

modbus_controller:
  - id: inverter
    address: 0x01
    modbus_id: modbus_hub
    update_interval: 5s

sensor:
  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "PV Voltage"
    register_type: holding
    address: 0x0006
    value_type: U_WORD
    unit_of_measurement: "V"
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "PV Current"
    register_type: holding
    address: 0x0007
    value_type: U_WORD
    unit_of_measurement: "A"
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "PV Power"
    register_type: holding
    address: 0x000A
    value_type: U_WORD
    unit_of_measurement: "W"

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Daily Energy"
    register_type: holding
    address: 0x003C
    value_type: U_WORD
    unit_of_measurement: "kWh"
    filters:
      - multiply: 0.1
```

---

## Solar Energy

### Victron MPPT Monitor
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# Monitor Victron MPPT via VE.Direct
external_components:
  - source: github://KinDR007/VictronMPPT-ESPHOME@main
    components: [victron]

substitutions:
  device_name: "victron-mppt"
  friendly_name: "Solar MPPT"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:
  baud_rate: 0

uart:
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 19200

victron:
  id: victron_mppt

sensor:
  - platform: victron
    victron_id: victron_mppt
    panel_voltage:
      name: "PV Voltage"
    panel_power:
      name: "PV Power"
      device_class: power
      state_class: measurement
    battery_voltage:
      name: "Battery Voltage"
    battery_current:
      name: "Battery Current"
    yield_today:
      name: "Yield Today"
      device_class: energy
      state_class: total_increasing
    yield_total:
      name: "Yield Total"
      device_class: energy
      state_class: total_increasing

text_sensor:
  - platform: victron
    victron_id: victron_mppt
    charging_mode:
      name: "Charging Mode"
    error:
      name: "Error"
```

### Solar Battery Dashboard
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# JK-BMS Battery Monitor via BLE
external_components:
  - source: github://syssi/esphome-jk-bms@main
    components: [jk_bms_ble]

substitutions:
  device_name: "solar-battery"
  friendly_name: "Solar Battery"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

esp32_ble_tracker:

jk_bms_ble:
  - id: jk_bms
    mac_address: "C8:47:8C:XX:XX:XX"

sensor:
  - platform: jk_bms_ble
    jk_bms_ble_id: jk_bms
    total_voltage:
      name: "Battery Voltage"
    current:
      name: "Battery Current"
    power:
      name: "Battery Power"
      device_class: power
      state_class: measurement
    state_of_charge:
      name: "State of Charge"
    temperature_sensor_1:
      name: "Battery Temp 1"
    temperature_sensor_2:
      name: "Battery Temp 2"
    capacity_remaining:
      name: "Capacity Remaining"
    cycles:
      name: "Charge Cycles"

    # Cell voltages
    cell_voltage_1:
      name: "Cell 1"
    cell_voltage_2:
      name: "Cell 2"
    cell_voltage_3:
      name: "Cell 3"
    cell_voltage_4:
      name: "Cell 4"
    delta_cell_voltage:
      name: "Cell Delta"
```

### Grid-Tie Inverter Monitor (Modbus)
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# Generic Modbus inverter (adjust registers for your model)
substitutions:
  device_name: "grid-inverter"
  friendly_name: "Grid Inverter"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

uart:
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 9600
  parity: NONE

modbus:
  id: modbus_hub

modbus_controller:
  - id: inverter
    address: 0x01
    modbus_id: modbus_hub
    update_interval: 5s

sensor:
  # PV Input
  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "PV1 Voltage"
    register_type: holding
    address: 0x0006
    value_type: U_WORD
    unit_of_measurement: "V"
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "PV1 Power"
    register_type: holding
    address: 0x000A
    value_type: U_WORD
    unit_of_measurement: "W"
    device_class: power
    state_class: measurement

  # Grid
  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Grid Voltage"
    register_type: holding
    address: 0x0014
    value_type: U_WORD
    unit_of_measurement: "V"
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Grid Power"
    register_type: holding
    address: 0x0019
    value_type: S_WORD
    unit_of_measurement: "W"
    device_class: power
    state_class: measurement

  # Battery
  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Battery Voltage"
    register_type: holding
    address: 0x0024
    value_type: U_WORD
    unit_of_measurement: "V"
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Battery SoC"
    register_type: holding
    address: 0x0028
    value_type: U_WORD
    unit_of_measurement: "%"

  # Daily production
  - platform: modbus_controller
    modbus_controller_id: inverter
    name: "Today Production"
    register_type: holding
    address: 0x003C
    value_type: U_WORD
    unit_of_measurement: "kWh"
    device_class: energy
    state_class: total_increasing
    filters:
      - multiply: 0.1
```

---

## Security

### Water Leak Detector
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: water-leak

esp8266:
  board: d1_mini

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

binary_sensor:
  - platform: gpio
    pin: GPIO5
    name: "Water Leak"
    device_class: moisture
    on_press:
      - homeassistant.service:
          service: notify.mobile_app
          data:
            title: "Water Leak Detected!"
            message: "Check immediately!"
      - switch.turn_on: buzzer

switch:
  - platform: gpio
    id: buzzer
    pin: GPIO4

button:
  - platform: template
    name: "Silence Alarm"
    on_press:
      - switch.turn_off: buzzer
```

### Door/Window Sensor (Battery)
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: door-sensor

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

deep_sleep:
  run_duration: 10s
  sleep_duration: 0s
  wakeup_pin:
    number: GPIO25
    allow_other_uses: true

binary_sensor:
  - platform: gpio
    pin:
      number: GPIO25
      mode: INPUT_PULLUP
      allow_other_uses: true
    name: "Front Door"
    device_class: door

sensor:
  - platform: adc
    pin: GPIO35
    name: "Battery"
    update_interval: 60s
    attenuation: 11db
    filters:
      - multiply: 2
```

---

## Garage & Access

### Garage Door Controller
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "garage-door"

esphome:
  name: ${device_name}

esp8266:
  board: d1_mini

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

binary_sensor:
  - platform: gpio
    pin:
      number: GPIO5
      mode: INPUT_PULLUP
      inverted: true
    id: door_closed
    name: "Door Closed"

  - platform: gpio
    pin:
      number: GPIO4
      mode: INPUT_PULLUP
      inverted: true
    id: door_open
    name: "Door Open"

  - platform: gpio
    pin:
      number: GPIO14
      mode: INPUT_PULLUP
    id: obstruction
    name: "Obstruction"
    device_class: safety

switch:
  - platform: gpio
    id: relay
    pin: GPIO12
    on_turn_on:
      - delay: 500ms
      - switch.turn_off: relay

cover:
  - platform: template
    name: "Garage Door"
    device_class: garage
    lambda: |-
      if (id(door_closed).state) return COVER_CLOSED;
      if (id(door_open).state) return COVER_OPEN;
      return {};
    open_action:
      - switch.turn_on: relay
    close_action:
      - if:
          condition:
            binary_sensor.is_off: obstruction
          then:
            - switch.turn_on: relay
    stop_action:
      - switch.turn_on: relay
```

### RFID Access Control
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: rfid-access

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

spi:
  clk_pin: GPIO18
  miso_pin: GPIO19
  mosi_pin: GPIO23

rc522_spi:
  cs_pin: GPIO5
  on_tag:
    then:
      - homeassistant.tag_scanned: !lambda "return x;"
      - if:
          condition:
            lambda: |-
              // Authorized cards
              return x == "12-34-56-78" || x == "AB-CD-EF-01";
          then:
            - switch.turn_on: door_lock
            - delay: 5s
            - switch.turn_off: door_lock
          else:
            - light.turn_on:
                id: status_led
                effect: "Blink Red"
            - delay: 2s
            - light.turn_off: status_led

switch:
  - platform: gpio
    id: door_lock
    pin: GPIO12
    restore_mode: ALWAYS_OFF

light:
  - platform: neopixelbus
    id: status_led
    type: GRB
    pin: GPIO4
    num_leds: 1
    effects:
      - strobe:
          name: "Blink Red"
          colors:
            - state: true
              brightness: 100%
              red: 100%
              green: 0%
              blue: 0%
              duration: 200ms
            - state: false
              duration: 200ms
```

---

## Garden & Irrigation

### Smart Irrigation Controller
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "irrigation"

esphome:
  name: ${device_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# Soil moisture sensors
sensor:
  - platform: adc
    pin: GPIO34
    name: "Zone 1 Moisture"
    id: moisture_1
    update_interval: 5min
    attenuation: 11db
    filters:
      - calibrate_linear:
          - 2.8 -> 0.0  # Dry
          - 1.2 -> 100.0  # Wet
    unit_of_measurement: "%"

  - platform: adc
    pin: GPIO35
    name: "Zone 2 Moisture"
    id: moisture_2
    update_interval: 5min
    attenuation: 11db
    filters:
      - calibrate_linear:
          - 2.8 -> 0.0
          - 1.2 -> 100.0
    unit_of_measurement: "%"

# Zone valves
switch:
  - platform: gpio
    id: zone1_valve
    name: "Zone 1 Valve"
    pin: GPIO25
    restore_mode: ALWAYS_OFF

  - platform: gpio
    id: zone2_valve
    name: "Zone 2 Valve"
    pin: GPIO26
    restore_mode: ALWAYS_OFF

  - platform: gpio
    id: zone3_valve
    name: "Zone 3 Valve"
    pin: GPIO27
    restore_mode: ALWAYS_OFF

  - platform: gpio
    id: zone4_valve
    name: "Zone 4 Valve"
    pin: GPIO14
    restore_mode: ALWAYS_OFF

# Auto-irrigation based on moisture
interval:
  - interval: 30min
    then:
      - if:
          condition:
            sensor.in_range:
              id: moisture_1
              below: 30
          then:
            - switch.turn_on: zone1_valve
            - delay: 10min
            - switch.turn_off: zone1_valve
```

### Pool Controller
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: pool-controller

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

one_wire:
  - platform: gpio
    pin: GPIO4

sensor:
  # Water temperature
  - platform: dallas_temp
    address: 0x1234567890ABCDEF
    name: "Pool Temperature"

  # pH sensor (analog)
  - platform: adc
    pin: GPIO34
    name: "Pool pH"
    update_interval: 5min
    attenuation: 11db
    filters:
      - calibrate_linear:
          - 1.5 -> 4.0
          - 2.0 -> 7.0
          - 2.5 -> 10.0

  # ORP sensor
  - platform: adc
    pin: GPIO35
    name: "Pool ORP"
    unit_of_measurement: "mV"
    attenuation: 11db

switch:
  - platform: gpio
    id: pump
    name: "Pool Pump"
    pin: GPIO25

  - platform: gpio
    id: heater
    name: "Pool Heater"
    pin: GPIO26

  - platform: gpio
    id: chlorinator
    name: "Chlorinator"
    pin: GPIO27

# Pump schedule
time:
  - platform: homeassistant
    on_time:
      - hours: 8
        then:
          - switch.turn_on: pump
      - hours: 18
        then:
          - switch.turn_off: pump
```

---

## Entertainment

### IR Remote Hub
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: ir-hub

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

remote_transmitter:
  pin: GPIO5
  carrier_duty_percent: 50%

remote_receiver:
  pin:
    number: GPIO14
    inverted: true
    mode: INPUT_PULLUP
  dump: all

# TV controls
button:
  - platform: template
    name: "TV Power"
    on_press:
      - remote_transmitter.transmit_samsung:
          data: 0xE0E040BF

  - platform: template
    name: "TV Volume Up"
    on_press:
      - remote_transmitter.transmit_samsung:
          data: 0xE0E0E01F

  - platform: template
    name: "TV Volume Down"
    on_press:
      - remote_transmitter.transmit_samsung:
          data: 0xE0E0D02F

  - platform: template
    name: "TV Mute"
    on_press:
      - remote_transmitter.transmit_samsung:
          data: 0xE0E0F00F

  - platform: template
    name: "TV Source"
    on_press:
      - remote_transmitter.transmit_samsung:
          data: 0xE0E0807F

# AC control
climate:
  - platform: coolix
    name: "Air Conditioner"
    supports_heat: true
    supports_cool: true
```

### LED Matrix Clock
```yaml
# Generated by esphome-assistant v2.0.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

esphome:
  name: led-clock

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

time:
  - platform: homeassistant
    id: ha_time

spi:
  clk_pin: GPIO18
  mosi_pin: GPIO23

font:
  - file: "gfonts://Roboto"
    id: clock_font
    size: 8

display:
  - platform: max7219digit
    cs_pin: GPIO5
    num_chips: 4
    intensity: 5
    lambda: |-
      it.strftime(0, 0, id(clock_font), "%H:%M", id(ha_time).now());

sensor:
  - platform: homeassistant
    entity_id: sensor.outside_temperature
    id: outside_temp

# Alternate display
interval:
  - interval: 10s
    then:
      - display.page.show_next: led_display
```

---

## Appliance Monitoring

### Washing Machine Monitor
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# Monitor washing machine via vibration sensor
substitutions:
  device_name: "washing-machine"
  friendly_name: "Washing Machine"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp8266:
  board: d1_mini

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# Vibration sensor (SW-420)
binary_sensor:
  - platform: gpio
    pin: GPIO5
    name: "Vibration"
    id: vibration
    device_class: vibration
    filters:
      - delayed_on: 100ms
      - delayed_off: 5s

# Track running state
globals:
  - id: running
    type: bool
    initial_value: "false"
  - id: last_vibration
    type: unsigned long
    initial_value: "0"

sensor:
  # Power consumption (optional)
  - platform: hlw8012
    sel_pin: GPIO12
    cf_pin: GPIO14
    cf1_pin: GPIO5
    current:
      name: "Current"
    power:
      name: "Power"
      id: power_sensor
    update_interval: 10s

  # Running time
  - platform: template
    name: "Cycle Time"
    id: cycle_time
    unit_of_measurement: "min"
    accuracy_decimals: 0

interval:
  - interval: 1s
    then:
      - lambda: |-
          // Detect machine running via vibration or power
          bool is_active = id(vibration).state || id(power_sensor).state > 5.0;

          if (is_active && !id(running)) {
            // Just started
            id(running) = true;
            id(last_vibration) = millis();
          } else if (!is_active && id(running)) {
            // Check if stopped for 2 minutes
            if (millis() - id(last_vibration) > 120000) {
              id(running) = false;
              // Send notification
              id(washer_done).publish_state(true);
            }
          } else if (is_active) {
            id(last_vibration) = millis();
          }

          if (id(running)) {
            id(cycle_time).publish_state((millis() - id(last_vibration)) / 60000.0);
          }

binary_sensor:
  - platform: template
    name: "Cycle Complete"
    id: washer_done
    device_class: running
    on_press:
      - homeassistant.service:
          service: notify.mobile_app
          data:
            title: "Washing Machine"
            message: "Cycle complete!"
      - delay: 5s
      - binary_sensor.template.publish:
          id: washer_done
          state: false
```

### Coffee Machine Automation
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# Smart coffee maker control with scheduling
substitutions:
  device_name: "coffee-maker"
  friendly_name: "Coffee Maker"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp8266:
  board: esp01_1m

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
  services:
    - service: make_coffee
      then:
        - switch.turn_on: relay
        - delay: 5min
        - switch.turn_off: relay
ota:
logger:

time:
  - platform: homeassistant
    id: ha_time
    on_time:
      # Weekday morning coffee
      - hours: 6
        minutes: 30
        days_of_week: MON-FRI
        then:
          - if:
              condition:
                switch.is_on: auto_mode
              then:
                - switch.turn_on: relay
                - delay: 5min
                - switch.turn_off: relay

switch:
  - platform: gpio
    pin: GPIO0
    name: "Power"
    id: relay
    restore_mode: ALWAYS_OFF
    on_turn_on:
      - delay: 10min  # Safety timeout
      - switch.turn_off: relay

  - platform: template
    name: "Auto Mode"
    id: auto_mode
    optimistic: true
    restore_mode: RESTORE_DEFAULT_OFF

binary_sensor:
  - platform: gpio
    pin:
      number: GPIO2
      mode: INPUT_PULLUP
      inverted: true
    name: "Button"
    on_press:
      - switch.toggle: relay

sensor:
  - platform: adc
    pin: A0
    name: "Water Level"
    update_interval: 60s
    filters:
      - calibrate_linear:
          - 0.2 -> 0
          - 0.9 -> 100
    unit_of_measurement: "%"
    on_value_range:
      - below: 20
        then:
          - homeassistant.service:
              service: notify.mobile_app
              data:
                title: "Coffee Maker"
                message: "Water tank is low!"
```

### Dishwasher Monitor
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "dishwasher"
  friendly_name: "Dishwasher"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp8266:
  board: d1_mini

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# Power monitoring for cycle detection
sensor:
  - platform: hlw8012
    sel_pin: GPIO12
    cf_pin: GPIO14
    cf1_pin: GPIO5
    power:
      name: "Power"
      id: power
      on_value_range:
        - above: 10
          then:
            - binary_sensor.template.publish:
                id: running
                state: true
        - below: 5
          then:
            - delay: 2min
            - if:
                condition:
                  sensor.in_range:
                    id: power
                    below: 5
                then:
                  - binary_sensor.template.publish:
                      id: running
                      state: false

binary_sensor:
  - platform: template
    name: "Running"
    id: running
    device_class: running
    on_release:
      - homeassistant.service:
          service: notify.mobile_app
          data:
            title: "Dishwasher"
            message: "Cycle complete!"

  - platform: gpio
    pin: GPIO4
    name: "Door"
    device_class: door
```

---

## Display Projects

### E-ink Weather Dashboard
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

# Inspired by Weatherman Dashboard
substitutions:
  device_name: "weather-display"
  friendly_name: "Weather Display"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

# Deep sleep between updates
deep_sleep:
  id: deep_sleep_ctrl
  run_duration: 60s
  sleep_duration: 15min

spi:
  clk_pin: GPIO18
  mosi_pin: GPIO23

# Fonts
font:
  - file: "gfonts://Roboto"
    id: font_small
    size: 14
  - file: "gfonts://Roboto"
    id: font_medium
    size: 24
  - file: "gfonts://Roboto"
    id: font_large
    size: 56
  - file: "gfonts://Roboto"
    id: font_xlarge
    size: 72

# Weather icons (Material Symbols)
  - file: "gfonts://Material+Symbols+Outlined"
    id: weather_icons
    size: 64
    glyphs:
      - "\U0000e81a"  # sunny
      - "\U0000f070"  # cloudy
      - "\U0000e2bd"  # rainy
      - "\U0000e80f"  # snowy
      - "\U0000e3ac"  # foggy

# Weather data from HA
sensor:
  - platform: homeassistant
    entity_id: sensor.outdoor_temperature
    id: temp_now
    internal: true

  - platform: homeassistant
    entity_id: sensor.outdoor_humidity
    id: humidity
    internal: true

  - platform: homeassistant
    entity_id: sensor.forecast_high
    id: temp_high
    internal: true

  - platform: homeassistant
    entity_id: sensor.forecast_low
    id: temp_low
    internal: true

text_sensor:
  - platform: homeassistant
    entity_id: weather.home
    id: weather_state
    internal: true

time:
  - platform: homeassistant
    id: ha_time

# E-paper display (4.2" Waveshare)
display:
  - platform: waveshare_epaper
    cs_pin: GPIO5
    dc_pin: GPIO17
    busy_pin: GPIO4
    reset_pin: GPIO16
    model: 4.20in-bV2
    update_interval: never
    full_update_every: 1
    lambda: |-
      // Current temperature (large)
      if (!isnan(id(temp_now).state)) {
        it.printf(20, 10, id(font_xlarge), "%.0f°", id(temp_now).state);
      }

      // Weather icon
      auto weather = id(weather_state).state;
      const char* icon = "\U0000f070";  // default: cloudy
      if (weather == "sunny" || weather == "clear-night") icon = "\U0000e81a";
      else if (weather == "rainy" || weather == "pouring") icon = "\U0000e2bd";
      else if (weather == "snowy") icon = "\U0000e80f";
      else if (weather == "fog") icon = "\U0000e3ac";
      it.printf(300, 10, id(weather_icons), icon);

      // High/Low
      it.printf(20, 100, id(font_medium), "H: %.0f°  L: %.0f°",
                id(temp_high).state, id(temp_low).state);

      // Humidity
      it.printf(20, 140, id(font_small), "Humidity: %.0f%%", id(humidity).state);

      // Last update
      it.strftime(300, 140, id(font_small), "%H:%M", id(ha_time).now());

# Update display on data change
interval:
  - interval: 30s
    then:
      - component.update: epaper_display
      - deep_sleep.enter: deep_sleep_ctrl
```

### LILYGO T-Display Dashboard
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "t-display"
  friendly_name: "T-Display"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev
  framework:
    type: arduino

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
  platform: esphome
logger:

spi:
  clk_pin: GPIO18
  mosi_pin: GPIO19

# Backlight
output:
  - platform: ledc
    pin: GPIO4
    id: backlight_pwm

light:
  - platform: monochromatic
    output: backlight_pwm
    name: "Backlight"
    id: backlight
    restore_mode: ALWAYS_ON

font:
  - file: "gfonts://Roboto"
    id: font_small
    size: 12
  - file: "gfonts://Roboto"
    id: font_medium
    size: 20
  - file: "gfonts://Roboto"
    id: font_large
    size: 36

color:
  - id: color_red
    red: 100%
  - id: color_green
    green: 100%
  - id: color_blue
    blue: 100%
  - id: color_white
    white: 100%

# HA sensor data
sensor:
  - platform: homeassistant
    entity_id: sensor.temperature
    id: ha_temp
    internal: true

  - platform: homeassistant
    entity_id: sensor.humidity
    id: ha_hum
    internal: true

  - platform: adc
    pin: GPIO34
    name: "Battery"
    id: battery
    attenuation: 11db
    filters:
      - multiply: 2.0
    update_interval: 60s

time:
  - platform: homeassistant
    id: ha_time

# ST7789 display (135x240)
display:
  - platform: st7789v
    model: TTGO_TDisplay_135x240
    cs_pin: GPIO5
    dc_pin: GPIO16
    reset_pin: GPIO23
    rotation: 90
    update_interval: 1s
    lambda: |-
      // Background
      it.fill(Color::BLACK);

      // Time (large)
      it.strftime(10, 5, id(font_large), id(color_white), "%H:%M", id(ha_time).now());

      // Date
      it.strftime(10, 45, id(font_small), id(color_white), "%a %d %b", id(ha_time).now());

      // Temperature
      if (!isnan(id(ha_temp).state)) {
        it.printf(10, 70, id(font_medium), id(color_green), "%.1f°C", id(ha_temp).state);
      }

      // Humidity
      if (!isnan(id(ha_hum).state)) {
        it.printf(10, 95, id(font_medium), id(color_blue), "%.0f%%", id(ha_hum).state);
      }

      // Battery indicator
      float batt = (id(battery).state - 3.0) / 1.2 * 100;
      if (batt > 100) batt = 100;
      if (batt < 0) batt = 0;
      it.printf(200, 5, id(font_small), id(color_white), "%.0f%%", batt);

# Buttons
binary_sensor:
  - platform: gpio
    pin:
      number: GPIO0
      inverted: true
    name: "Button 1"
    on_press:
      - light.dim_relative:
          id: backlight
          relative_brightness: -20%

  - platform: gpio
    pin:
      number: GPIO35
      inverted: true
    name: "Button 2"
    on_press:
      - light.dim_relative:
          id: backlight
          relative_brightness: 20%
```

### Nextion Wall Panel
```yaml
# Generated by esphome-assistant v2.1.0
# https://github.com/tonylofgren/supercharge-smart-home-claude-skills

substitutions:
  device_name: "wall-panel"
  friendly_name: "Wall Panel"

esphome:
  name: ${device_name}
  friendly_name: ${friendly_name}

esp32:
  board: esp32dev

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
  services:
    - service: send_notification
      variables:
        title: string
        message: string
      then:
        - lambda: |-
            id(nextion_display).set_component_text("notify.title", title.c_str());
            id(nextion_display).set_component_text("notify.msg", message.c_str());
            id(nextion_display).goto_page("notify");
        - delay: 10s
        - lambda: id(nextion_display).goto_page("main");
ota:
logger:

uart:
  tx_pin: GPIO17
  rx_pin: GPIO16
  baud_rate: 115200

# HA data
sensor:
  - platform: homeassistant
    entity_id: sensor.living_room_temperature
    id: temp_living
    on_value:
      - lambda: |-
          id(nextion_display).set_component_text_printf("main.temp", "%.1f°C", x);

  - platform: homeassistant
    entity_id: sensor.power_consumption
    id: power
    on_value:
      - lambda: |-
          id(nextion_display).set_component_text_printf("main.power", "%.0fW", x);

text_sensor:
  - platform: homeassistant
    entity_id: weather.home
    id: weather
    on_value:
      - lambda: |-
          // Map weather to Nextion icon
          int icon = 0;
          if (x == "sunny") icon = 0;
          else if (x == "cloudy") icon = 1;
          else if (x == "rainy") icon = 2;
          id(nextion_display).set_component_value("main.weather_icon", icon);

# Nextion display
display:
  - platform: nextion
    id: nextion_display
    update_interval: 5s

# Touch events
binary_sensor:
  - platform: nextion
    page_id: 0
    component_id: 3
    name: "Light Toggle"
    on_press:
      - homeassistant.service:
          service: light.toggle
          data:
            entity_id: light.living_room

  - platform: nextion
    page_id: 0
    component_id: 4
    name: "AC Toggle"
    on_press:
      - homeassistant.service:
          service: climate.toggle
          data:
            entity_id: climate.living_room

  - platform: nextion
    page_id: 0
    component_id: 5
    name: "Scene Button"
    on_press:
      - homeassistant.service:
          service: scene.turn_on
          data:
            entity_id: scene.movie_mode

# Brightness control from Nextion slider
number:
  - platform: nextion
    id: brightness_slider
    component_name: main.brightness
    name: "Brightness Control"
    on_value:
      - homeassistant.service:
          service: light.turn_on
          data:
            entity_id: light.living_room
            brightness_pct: !lambda return x;
```
