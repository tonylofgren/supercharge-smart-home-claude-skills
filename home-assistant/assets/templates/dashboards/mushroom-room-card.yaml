# Mushroom Room Card Template
# Modern room overview card with collapsible sections
#
# Copy and customize for each room in your home
# Requires: mushroom cards, card-mod, stack-in-card (all from HACS)
#
# Generated by ha-yaml@aurora-smart-home
# https://github.com/tonylofgren/aurora-smart-home

# =============================================================================
# OPTION 1: Simple Room Card
# =============================================================================

type: custom:mushroom-template-card
entity: light.living_room
primary: Living Room
secondary: |
  {{ states('sensor.living_room_temperature') }}°C ·
  {{ states('sensor.living_room_humidity') }}%
icon: mdi:sofa
icon_color: |
  {% if is_state('light.living_room', 'on') %}
    amber
  {% else %}
    grey
  {% endif %}
badge_icon: |
  {% if is_state('binary_sensor.living_room_motion', 'on') %}
    mdi:motion-sensor
  {% endif %}
badge_color: amber
tap_action:
  action: toggle
hold_action:
  action: more-info
double_tap_action:
  action: navigate
  navigation_path: /lovelace/living-room

---

# =============================================================================
# OPTION 2: Expanded Room Card with Details
# =============================================================================

type: custom:stack-in-card
mode: vertical
cards:
  # Room header with main light control
  - type: custom:mushroom-template-card
    primary: Living Room
    secondary: |
      {% set temp = states('sensor.living_room_temperature') | float(0) %}
      {% set humidity = states('sensor.living_room_humidity') | float(0) %}
      {% set lights_on = expand('light.living_room_group') | selectattr('state', 'eq', 'on') | list | count %}
      {{ temp | round(1) }}°C · {{ humidity | round(0) }}% · {{ lights_on }} lights
    icon: mdi:sofa
    icon_color: |
      {% if is_state('light.living_room', 'on') %}
        amber
      {% else %}
        grey
      {% endif %}
    tap_action:
      action: navigate
      navigation_path: /lovelace/living-room
    card_mod:
      style: |
        ha-card {
          --card-primary-font-size: 18px;
          --card-secondary-font-size: 14px;
        }

  # Control chips row
  - type: custom:mushroom-chips-card
    chips:
      # All lights toggle
      - type: template
        icon: mdi:lightbulb-group
        icon_color: |
          {% if is_state('light.living_room_group', 'on') %}
            amber
          {% else %}
            grey
          {% endif %}
        tap_action:
          action: call-service
          service: light.toggle
          target:
            entity_id: light.living_room_group
        content: Lights

      # Main light with brightness
      - type: template
        icon: mdi:ceiling-light
        icon_color: |
          {% if is_state('light.living_room_ceiling', 'on') %}
            amber
          {% else %}
            grey
          {% endif %}
        content: |
          {% if is_state('light.living_room_ceiling', 'on') %}
            {{ state_attr('light.living_room_ceiling', 'brightness') | int / 2.55 | round(0) }}%
          {% else %}
            Off
          {% endif %}
        tap_action:
          action: toggle
          target:
            entity_id: light.living_room_ceiling
        hold_action:
          action: more-info
          target:
            entity_id: light.living_room_ceiling

      # TV/Media
      - type: template
        icon: mdi:television
        icon_color: |
          {% if is_state('media_player.living_room_tv', 'playing') %}
            blue
          {% elif is_state('media_player.living_room_tv', 'on') %}
            cyan
          {% else %}
            grey
          {% endif %}
        tap_action:
          action: more-info
          target:
            entity_id: media_player.living_room_tv
        content: TV

      # Climate
      - type: template
        icon: mdi:thermostat
        icon_color: |
          {% if is_state_attr('climate.living_room', 'hvac_action', 'heating') %}
            deep-orange
          {% elif is_state_attr('climate.living_room', 'hvac_action', 'cooling') %}
            blue
          {% else %}
            grey
          {% endif %}
        content: |
          {{ state_attr('climate.living_room', 'current_temperature') | round(0) }}°
        tap_action:
          action: more-info
          target:
            entity_id: climate.living_room

      # Scene shortcuts
      - type: template
        icon: mdi:movie
        icon_color: purple
        tap_action:
          action: call-service
          service: scene.turn_on
          target:
            entity_id: scene.living_room_movie
        content: Movie

    card_mod:
      style: |
        ha-card {
          --chip-spacing: 8px;
        }

---

# =============================================================================
# OPTION 3: Collapsible Room Card
# =============================================================================

type: custom:mushroom-template-card
entity: light.bedroom
primary: Bedroom
secondary: |
  {{ states('sensor.bedroom_temperature') }}°C
icon: mdi:bed
icon_color: |
  {% if is_state('light.bedroom', 'on') %}
    amber
  {% else %}
    grey
  {% endif %}
tap_action:
  action: fire-dom-event
  browser_mod:
    service: browser_mod.popup
    data:
      title: Bedroom
      content:
        type: vertical-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bedroom_ceiling
            name: Ceiling Light
            show_brightness_control: true
            use_light_color: true
            collapsible_controls: true

          - type: custom:mushroom-light-card
            entity: light.bedroom_nightstand
            name: Nightstand
            show_brightness_control: true
            use_light_color: true

          - type: custom:mushroom-climate-card
            entity: climate.bedroom
            show_temperature_control: true
            collapsible_controls: true

          - type: custom:mushroom-entity-card
            entity: cover.bedroom_blinds
            name: Blinds

---

# =============================================================================
# OPTION 4: Compact Grid of Room Cards
# =============================================================================

type: grid
columns: 2
square: false
cards:
  # Living Room
  - type: custom:mushroom-template-card
    entity: light.living_room
    primary: Living Room
    secondary: "{{ states('sensor.living_room_temperature') }}°C"
    icon: mdi:sofa
    icon_color: "{{ 'amber' if is_state('light.living_room', 'on') else 'grey' }}"
    layout: vertical
    tap_action:
      action: navigate
      navigation_path: /lovelace/living-room

  # Bedroom
  - type: custom:mushroom-template-card
    entity: light.bedroom
    primary: Bedroom
    secondary: "{{ states('sensor.bedroom_temperature') }}°C"
    icon: mdi:bed
    icon_color: "{{ 'amber' if is_state('light.bedroom', 'on') else 'grey' }}"
    layout: vertical
    tap_action:
      action: navigate
      navigation_path: /lovelace/bedroom

  # Kitchen
  - type: custom:mushroom-template-card
    entity: light.kitchen
    primary: Kitchen
    secondary: "{{ states('sensor.kitchen_temperature') }}°C"
    icon: mdi:silverware-fork-knife
    icon_color: "{{ 'amber' if is_state('light.kitchen', 'on') else 'grey' }}"
    layout: vertical
    tap_action:
      action: navigate
      navigation_path: /lovelace/kitchen

  # Bathroom
  - type: custom:mushroom-template-card
    entity: light.bathroom
    primary: Bathroom
    secondary: "{{ states('sensor.bathroom_humidity') }}%"
    icon: mdi:shower-head
    icon_color: "{{ 'amber' if is_state('light.bathroom', 'on') else 'grey' }}"
    layout: vertical
    tap_action:
      action: navigate
      navigation_path: /lovelace/bathroom

  # Office
  - type: custom:mushroom-template-card
    entity: light.office
    primary: Office
    secondary: "{{ states('sensor.office_temperature') }}°C"
    icon: mdi:desk
    icon_color: "{{ 'amber' if is_state('light.office', 'on') else 'grey' }}"
    layout: vertical
    tap_action:
      action: navigate
      navigation_path: /lovelace/office

  # Garage
  - type: custom:mushroom-template-card
    entity: cover.garage_door
    primary: Garage
    secondary: "{{ states('cover.garage_door') | title }}"
    icon: "{{ 'mdi:garage-open' if is_state('cover.garage_door', 'open') else 'mdi:garage' }}"
    icon_color: "{{ 'red' if is_state('cover.garage_door', 'open') else 'green' }}"
    layout: vertical
    tap_action:
      action: more-info

---

# =============================================================================
# USEFUL ICON REFERENCE FOR ROOMS
# =============================================================================

# Room Icons:
#   Living Room: mdi:sofa, mdi:sofa-outline
#   Bedroom: mdi:bed, mdi:bed-outline, mdi:bed-queen
#   Kitchen: mdi:silverware-fork-knife, mdi:stove
#   Bathroom: mdi:shower-head, mdi:toilet, mdi:bathtub
#   Office: mdi:desk, mdi:desktop-classic, mdi:laptop
#   Garage: mdi:garage, mdi:garage-open, mdi:car
#   Garden: mdi:flower, mdi:tree, mdi:grass
#   Laundry: mdi:washing-machine, mdi:tumble-dryer
#   Kids Room: mdi:human-child, mdi:baby-face
#   Guest Room: mdi:account-group
#   Basement: mdi:stairs-down
#   Attic: mdi:home-roof

# Status Icons:
#   Temperature: mdi:thermometer
#   Humidity: mdi:water-percent
#   Motion: mdi:motion-sensor
#   Occupancy: mdi:account, mdi:account-multiple
#   Door: mdi:door, mdi:door-open
#   Window: mdi:window-closed-variant, mdi:window-open-variant
#   Light: mdi:lightbulb, mdi:ceiling-light, mdi:floor-lamp
#   Fan: mdi:fan, mdi:ceiling-fan
